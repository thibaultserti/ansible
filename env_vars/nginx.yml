---
creds_path: /var/lib/letsencrypt/dns_google_domains_credentials.ini

certbot_admin_email: thibault.ayanides@free.fr
certbot_create_if_missing: true
certbot_create_standalone_stop_services: []
certbot_create_command: |-
  certbot certonly --noninteractive
                  --authenticator 'dns-google-domains'
                  --agree-tos
                  --email {{ cert_item.email | default(certbot_admin_email) }}
                  --server 'https://acme-v02.api.letsencrypt.org/directory'
                  --dns-google-domains-zone 'ayanides.cloud'
                  --dns-google-domains-credentials '{{ creds_path }}'
                  -d {{ cert_item.domains | join(',') }}
certbot_create_method: standalone
certbot_certs:
  - domains:
    - '*.ayanides.cloud'


wildcard_domain: ayanides.cloud
nginx_vhost_template: nginx/vhost.j2
nginx_vhosts:
# SEMAPHORE
  - server_name: semaphore.ayanides.cloud
    listen: 443 ssl http2
    locations:
      - proxy_pass: http://127.0.0.1:3000
      - proxy_pass: http://127.0.0.1:3000/api/ws
        path: /api/ws
        default: false
        extra_parameters: |
          proxy_http_version 1.1;
          proxy_set_header Upgrade $http_upgrade;
          proxy_set_header Connection "upgrade";
          proxy_set_header Origin "";

# PIHOLE
  - server_name: pihole.ayanides.cloud
    listen: 443 ssl http2
    locations:
      - proxy_pass: http://127.0.0.1:8000

# BOX
  - server_name: box.ayanides.cloud
    listen: 443 ssl http2
    locations:
      - proxy_pass: http://192.168.0.1:80

# ROUTER
  - server_name: router.ayanides.cloud
    listen: 443 ssl http2
    locations:
      - proxy_pass: http://192.168.1.1:80
